function prevenirDefault(n){n.preventDefault();n.stopPropagation();return}function imprimirVentana(n){prevenirDefault(n);window.print();return}function indicacionesContinuar(n){prevenirDefault(n);$("#indicaciones-tramite").slideToggle();$("#propuesta-section").slideToggle();return}function mostrarPropuestaSection(){$("#noindicaciones").length>0&&$("#propuesta-section").slideToggle();return}function cerrarSesion(n){prevenirDefault(n);$("#cerrarsesion-form").submit();return}function redirectHome(n){prevenirDefault(n);$("#paginaprincipal-form").submit();return}function agregarMateria(n){prevenirDefault(n);llenarPropuesta(1,n);return}function quitarMateria(n){prevenirDefault(n);llenarPropuesta(2,n);return}function llenarPropuesta(n,t){if($(this).data("locked")==undefined||!$(this).data("locked")){var r=t.target.attributes.id.value,u="#"+r,f=$("#usuario")[0].value,e=$("#acceso")[0].value,o=$("#matricula")[0].value,s=$("#plan")[0].value,h=$("#tipo-plan")[0].value,c=$("#grado")[0].value,l=$("#modalidad")[0].value,a=$("#sistema")[0].value,v=$("#ciclo")[0].value,g=$("#creditos").html(),y=$("#creditos-maximos")[0].value,p=$("#creditos-minimos")[0].value,i=$("#tipo-examen")[0].value,w=n,b=$(u).parent().parent().find(".division").html(),k=r.substr(r.indexOf("-")+1),d=$(u).parent().parent().find(".grupo").html();i=="odNLEtQnxdU="&&$("#notasNIExtension").hide();$.ajax({type:"GET",url:"AccionGrupos",cache:!1,data:{usuario:f,acceso:e,matricula:o,plan:s,tipoPlan:h,grado:c,modalidad:l,sistema:a,ciclo:v,creditosMinimos:p,creditosMaximos:y,tipoExamen:i,accion:w,division:b,materia:k,grupo:d},contentType:"application/json; utf-8",dataType:"json",beforeSend:function(){$(this).data("locked",!0);$(".elegir-materia").off("click",agregarMateria);$(".quitar-materia").off("click",quitarMateria);$("#cargando").removeClass("datos")},success:function(n){if($propuesta=JSON.parse(n),$propuesta.p_error==null){$("#creditos-label").html($propuesta.p_creditos);$("#creditos").val($propuesta.p_creditos);$("#puede-guardar").val($propuesta.p_puede_guardar);$propuesta.p_puede_guardar==1?$("#boton-guardar-propuesta").hasClass("boton-deshabilitado")&&($("#boton-guardar-propuesta").removeClass("boton-deshabilitado"),$("#boton-guardar-propuesta").removeAttr("disabled")):$propuesta.p_puede_guardar==0&&($("#boton-guardar-propuesta").hasClass("boton-deshabilitado")||($("#boton-guardar-propuesta").addClass("boton-deshabilitado"),$("#boton-guardar-propuesta").attr("disabled","true")));var t="";$propuesta.p_seleccion.length>0&&(i=="odNLEtQnxdU="&&$("#notasNIExtension").show(),t+="<article id='seleccion-horario'><table id='tabla-seleccion' class='tabla-materias'><thead><tr><th class='asignatura'>Asignaturas Seleccionadas<\/th><th>Ciclo<\/th><th>Créditos<\/th><th>Grupo<\/th><th>Lunes<\/th><th>Martes<\/th><th>Miércoles<\/th><th>Jueves<\/th><th>Viernes<\/th><th>Sábado<\/th>"+(i=="RTZq8/bvUcI="||i=="odNLEtQnxdU="?"<th>Demanda Calificada<\/th><th>Alumnos<\/th>":"")+"<\/tr><\/thead><tbody>",$.each($propuesta.p_seleccion,function(n,r){var u=r.MAT_STYLE;t+="<tr class='Área General materia "+u+"'>"+(r.PUEDE_QUITAR_MATERIA==1?"<td class='nombre-materia'><a id='"+r.DIVISION+r.GRUPO+"-"+r.MATERIA+"' class='quitar-materia' href='#' >"+r.MATERIA_NOMBRE+"<\/a><\/td>":"<td class='nombre-materia'>"+r.MATERIA_NOMBRE+"<\/td>")+"<td class='creditos numero'>"+r.SEMESTRE+"<\/td><td class='creditos numero'>"+r.CREDITOS+"<\/td><td class='grupo texto'>"+r.GRUPO+"<\/td><td class='division datos'>"+r.DIVISION+"<\/td><td class='dia'>"+r.LUNES+"<\/td><td class='dia'>"+r.MARTES+"<\/td><td class='dia'>"+r.MIERCOLES+"<\/td><td class='dia'>"+r.JUEVES+"<\/td><td class='dia'>"+r.VIERNES+"<\/td><td class='dia'>"+r.SABADO+"<\/td>"+(i=="RTZq8/bvUcI="||i=="odNLEtQnxdU="?"<td class='dia'>"+r.DEMANDA_CALIFICADA+"<\/td><td class='dia'>"+r.ALUMNOS+"<\/td>":"")+"<\/tr>"}),t+="<\/tbody><\/table><\/article>");$propuesta.p_oferta.length>0&&(t+="<article id='oferta-horario'><table id='tabla-oferta' class='tabla-materias'><thead id='encabezado-oferta'><tr><th class='asignatura nombre-materia'>Asignaturas Ofertadas<\/th><th class='creditos'>Ciclo<\/th><th class='creditos'>Créditos<\/th><th class='grupo'>Grupo<\/th><th class='dia'>Lunes<\/th><th class='dia'>Martes<\/th><th class='dia'>Miércoles<\/th><th class='dia'>Jueves<\/th><th class='dia'>Viernes<\/th><th class='dia'>Sábado<\/th>"+(i=="RTZq8/bvUcI="||i=="odNLEtQnxdU="?"<th class='dia'>Demanda Calificada<\/th><th class='dia'>Alumnos<\/th>":"")+"<\/tr><\/thead><tbody>",$.each($propuesta.p_oferta,function(n,r){var u=r.MAT_STYLE;t+=r.MATERIA==""?"<tr class='area'><td colspan='12'>"+r.MATERIA_NOMBRE+"<\/td><\/tr>":"<tr class='Área General materia materia "+u+" "+r.CLASE+"'>"+(r.PUEDE_AGREGAR_MATERIA==1?"<td class='nombre-materia'><a id='"+r.DIVISION+r.GRUPO+"-"+r.MATERIA+"' class='elegir-materia' href='#' >"+r.MATERIA_NOMBRE+"<\/a><\/td>":"<td class='nombre-materia'>"+r.MATERIA_NOMBRE+"<\/td>")+"<td class='creditos numero'>"+r.SEMESTRE+"<\/td><td class='creditos numero'>"+r.CREDITOS+"<\/td><td class='grupo'>"+r.GRUPO+"<\/td><td class='division datos'>"+r.DIVISION+"<\/td><td class='dia'>"+r.LUNES+"<\/td><td class='dia'>"+r.MARTES+"<\/td><td class='dia'>"+r.MIERCOLES+"<\/td><td class='dia'>"+r.JUEVES+"<\/td><td class='dia'>"+r.VIERNES+"<\/td><td class='dia'>"+r.SABADO+"<\/td>"+(i=="RTZq8/bvUcI="||i=="odNLEtQnxdU="?"<td class='dia' id='demanda_calificada'>"+r.DEMANDA_CALIFICADA+"<\/td><td class='dia' id='alumnos'>"+r.ALUMNOS+"<\/td>":"")+"<\/tr>"}),t+="<\/tbody><\/table><\/article>");$("#horario-section").html(t);$(".elegir-materia").on("click",agregarMateria);$(".quitar-materia").on("click",quitarMateria);$("#cargando").addClass("datos");cursandoDesplegar(i)}else t="<section class='informacion-tramite'><article class='errores'><h3>"+$propuesta.p_error.toString()+"<\/h3><form action='/Reinscripcion/ElaborarPropuesta' method='get'><input type='submit' value='Cargar grupos' class='boton'><\/form><form action='/' method='post'><input type='submit' value='Página principal' class='boton'><\/form><\/article><\/section>",$("#propuesta-section").html(t)},error:function(n,t,i){html="<section class='informacion-tramite'><article class='errores'><h3>Lo sentimos; no se ha podido procesar su solicitud. Ha ocurrido lo siguiente: <\/h3><h3>"+getAjaxErrorString(t,i)+"<\/h3><form action='/' method='post'><input type='submit' value='Página Principal'><\/form><\/article><\/section>";$("#propuesta-section").html(html)},complete:function(){$(this).data("locked",!1)}})}return}function cursandoDesplegar(n){n=="RTZq8/bvUcI="&&($("#cursandoDesplegarInput").is(":checked")?$(".MATERIACURSANDO").show():$(".MATERIACURSANDO").hide())}function agregarMateriaCC(n){prevenirDefault(n);llenarPropuestaCC(1,n);return}function quitarMateriaCC(n){prevenirDefault(n);llenarPropuestaCC(2,n);return}function llenarPropuestaCC(n,t){if($(this).data("locked")==undefined||!$(this).data("locked")){var i=t.target.attributes.id.value,r="#"+i,u=$("#usuario")[0].value,f=$("#acceso")[0].value,e=$("#matricula")[0].value,o=$("#plan")[0].value,s=$("#tipo-plan")[0].value,h=$("#grado")[0].value,c=$("#modalidad")[0].value,l=$("#sistema")[0].value,a=$("#ciclo")[0].value,k=$("#creditos").html(),v=$("#tipo-examen")[0].value,y=n,p=$(r).parent().parent().find(".division").html(),w=i.substr(i.indexOf("-")+1),b=$(r).parent().parent().find(".grupo").html();$.ajax({type:"GET",url:"AccionGrupos",cache:!1,data:{usuario:u,acceso:f,matricula:e,plan:o,tipoPlan:s,grado:h,modalidad:c,sistema:l,ciclo:a,tipoExamen:v,accion:y,division:p,materia:w,grupo:b},contentType:"application/json; utf-8",dataType:"json",beforeSend:function(){$(this).data("locked",!0);$(".elegir-materiacc").off("click",agregarMateriaCC);$(".quitar-materiacc").off("click",quitarMateriaCC);$("#cargando").removeClass("datos")},success:function(n){if($propuesta=JSON.parse(n),$propuesta.p_error==null){$("#creditos-label").html($propuesta.p_creditos);$("#creditos").val($propuesta.p_creditos);$("#puede-guardar").val($propuesta.p_puede_guardar);$propuesta.p_puede_guardar==1?$("#boton-guardar-propuesta").hasClass("boton-deshabilitado")&&($("#boton-guardar-propuesta").removeClass("boton-deshabilitado"),$("#boton-guardar-propuesta").removeAttr("disabled")):$propuesta.p_puede_guardar==0&&($("#boton-guardar-propuesta").hasClass("boton-deshabilitado")||($("#boton-guardar-propuesta").addClass("boton-deshabilitado"),$("#boton-guardar-propuesta").attr("disabled","true")));var t="";$propuesta.p_seleccion.length>0&&(t+="<article id='seleccion-horario'><table id='tabla-seleccion' class='tabla-materias'><thead><tr><th class='asignatura'>Asignaturas Seleccionadas<\/th><th>Créditos<\/th><th>Grupo<\/th><th>Lunes<\/th><th>Martes<\/th><th>Miércoles<\/th><th>Jueves<\/th><th>Viernes<\/th><th>Sábado<\/th><\/tr><\/thead><tbody>",$.each($propuesta.p_seleccion,function(n,i){var r="";i.SISTEMA.toString()=="1"?r="mat-escolarizadas":i.SISTEMA.toString()=="2"?r="mat-movilidad":i.SISTEMA.toString()=="3"&&(r="mat-distancia");t+="<tr class='"+i.AGRUPACION+" materia "+r+"'><td class='nombre-materia'><a id='"+i.DIVISION+i.GRUPO+"-"+i.MATERIA+"' class='quitar-materiacc' href='#' >"+i.MATERIA_NOMBRE+"<\/a><\/td><td class='creditos numero'>"+i.CREDITOS+"<\/td><td class='grupo texto'>"+i.GRUPO+"<\/td><td class='division datos'>"+i.DIVISION+"<\/td><td class='dia'>"+i.LUNES+"<\/td><td class='dia'>"+i.MARTES+"<\/td><td class='dia'>"+i.MIERCOLES+"<\/td><td class='dia'>"+i.JUEVES+"<\/td><td class='dia'>"+i.VIERNES+"<\/td><td class='dia'>"+i.SABADO+"<\/td><\/tr>"}),t+="<\/tbody><\/table><\/article>");$propuesta.p_oferta.length>0&&(t+="<article id='oferta-horario'><table id='tabla-oferta' class='tabla-materias'><thead id='encabezado-oferta'><tr><th class='asignatura nombre-materia'>Asignaturas Ofertadas<\/th><th class='creditos'>Créditos<\/th><th class='grupo'>Grupo<\/th><th class='dia'>Lunes<\/th><th class='dia'>Martes<\/th><th class='dia'>Miércoles<\/th><th class='dia'>Jueves<\/th><th class='dia'>Viernes<\/th><th class='dia'>Sábado<\/th><\/tr><\/thead><tbody>",$.each($propuesta.p_oferta,function(n,i){var r="";i.SISTEMA.toString()=="1"?r="mat-escolarizadas":i.SISTEMA.toString()=="2"?r="mat-movilidad":i.SISTEMA.toString()=="3"&&(r="mat-distancia");t+=i.MATERIA==""?"<tr class='area'><td colspan='9'>"+i.MATERIA_NOMBRE+"<\/td><\/tr>":"<tr class='"+i.AGRUPACION+" materia "+r+"'><td class='nombre-materia'><a id='"+i.DIVISION+i.GRUPO+"-"+i.MATERIA+"' class='elegir-materiacc' href='#' >"+i.MATERIA_NOMBRE+"<\/a><\/td><td class='creditos numero'>"+i.CREDITOS+"<\/td><td class='grupo'>"+i.GRUPO+"<\/td><td class='division datos'>"+i.DIVISION+"<\/td><td class='dia'>"+i.LUNES+"<\/td><td class='dia'>"+i.MARTES+"<\/td><td class='dia'>"+i.MIERCOLES+"<\/td><td class='dia'>"+i.JUEVES+"<\/td><td class='dia'>"+i.VIERNES+"<\/td><td class='dia'>"+i.SABADO+"<\/td><\/tr>"}),t+="<\/tbody><\/table><\/article>");$("#horario-section").html(t);$(".elegir-materiacc").on("click",agregarMateriaCC);$(".quitar-materiacc").on("click",quitarMateriaCC);$("#cargando").addClass("datos")}else t="<section class='informacion-tramite'><article class='errores'><h3>"+$propuesta.p_error.toString()+"<\/h3><form action='/ReinscripcionCicloCorto/ElaborarPropuesta' method='get'><input type='submit' value='Cargar grupos' class='boton'><\/form><form action='/' method='post'><input type='submit' value='Página principal' class='boton'><\/form><\/article><\/section>",$("#propuesta-section").html(t)},error:function(n,t,i){html="<section class='informacion-tramite'><article class='errores'><h3>Lo sentimos; no se ha podido procesar su solicitud. Ha ocurrido lo siguiente: <\/h3><h3>"+getAjaxErrorString(t,i)+"<\/h3><form action='/' method='post'><input type='submit' value='Página Principal'><\/form><\/article><\/section>";$("#propuesta-section").html(html)},complete:function(){$(this).data("locked",!1)}})}return}function llenarInstrumentos(){$(function(){$("#contestar-encuesta-form").validate({rules:{".required":"required"}})});var n="";$.each($(".required"),function(t,i){n+=i.value+","});n=n.substr(0,n.length-1);$("#instrumentos-encuesta").val(n);return}function desplegarMenu(n){prevenirDefault(n);var t=n.target.attributes.id.value,i="#"+t;$(i).siblings().slideToggle();return}function validateLog(n){var t=validateUser(n),i=validatePassword(n);t&&i&&$("#user-pass").val($("#pass-user").val().trim());return}function validateUser(n){return $("#user-name").val().trim()==""?(prevenirDefault(n),$("#valid-name").html("El campo usuario es obligatorio"),$("#valid-name").removeClass("field-validation-valid"),$("#valid-name").addClass("field-validation-error"),!1):!0}function validatePassword(n){return $("#pass-user").val().trim()==""?(prevenirDefault(n),$("#valid-pass").html("El campo contraseña es obligatorio"),$("#valid-pass").removeClass("field-validation-valid"),$("#valid-pass").addClass("field-validation-error"),!1):!0}function validUser(){$("#user-name").val().trim().length>0&&($("#valid-name").html(""),$("#valid-name").addClass("field-validation-valid"),$("#valid-name").removeClass("field-validation-error"));return}function validPass(){$("#pass-user").val().trim().length>0&&($("#valid-pass").html(""),$("#valid-pass").addClass("field-validation-valid"),$("#valid-pass").removeClass("field-validation-error"));return}function enviarTira(n){prevenirDefault(n);var t=$("#cuerpo-tira").html().toString();$.ajax({type:"GET",url:$("#enviar-comprobante-form").attr("action"),data:{cuerpo:"hola"},contentType:"application/json; utf-8",dataType:"json",success:function(n){$response=JSON.parse(n);alert($response.mensaje)},error:function(n,t,i){alert("Lo sentimos; no se pudo procesar su solicitud. Ha ocurrido lo siguiente: "+getAjaxErrorString(t,i))}});return}function validateMotivosSolicitud(n){return $("#motivos-solicitud").val().trim().length==0?(prevenirDefault(n),$("#valid-motivos").html("Debe seleccionar un motivo de baja"),!1):!0}function validateMateriasSolicitud(n){return $(".checkbox-materia:checked").length==0?(prevenirDefault(n),$("#valid-materias").html("Debe seleccionar al menos una asignatura"),!1):!0}function validMotivosSolicitud(){$("#motivos-solicitud").val().trim().length>0&&$("#valid-motivos").html("");return}function validMateriasSolicitud(){$(".checkbox-materia:checked").length>0&&$("#valid-materias").html("");return}function modificarCreditosInscritos(n){var i=n.target.attributes.id.value,t="#"+i;$("#creditos-inscritos-label").length>0&&$('.creditos input[type="hidden"]').length>0&&($(t)[0].checked?$("#creditos-inscritos-label").html(parseInt($("#creditos-inscritos-label").html())-parseInt($(t).parent().parent().find('.creditos input[type="hidden"]')[0].value)):$("#creditos-inscritos-label").html(parseInt($("#creditos-inscritos-label").html())+parseInt($(t).parent().parent().find('.creditos input[type="hidden"]')[0].value)))}function llenarMaterias(){var n="",t,r;for(i=0;i<$(".checkbox-materia:checked").length;i++)t=$(".checkbox-materia:checked")[i].id,r=$("#"+$(".checkbox-materia:checked")[i].id).parent().parent().find(".grupo").html(),n+=""+t+"|"+r+",";n=n.substring(0,n.length-1);$("#materias-solicitud").val(n);return}function guardarBajaTemporal(n){var t=validateMotivosSolicitud(n),i=validateMateriasSolicitud(n);t&&i&&($("#motivo-solicitud").val($("#motivos-solicitud").val()),llenarMaterias());return}function guardarExamenExtraordinario(n){var t=validateMateriasSolicitud(n);t&&llenarMaterias();return}function llenarCreditosInscritos(){if($('#tabla-materias-bajaTemporal tr.materia td.creditos input[type="hidden"]').length>0){var n=0;for(i=0;i<$('#tabla-materias-bajaTemporal tr.materia td.creditos input[type="hidden"]').length;i++)n+=parseInt($('#tabla-materias-bajaTemporal tr.materia td.creditos input[type="hidden"]')[i].value);$("#creditos-inscritos-label").html(n)}}function llenarMunicipios(n){var t;$ciudades.p_error!=undefined?(t='<option value="">Error al cargar<\/option>',$("#listaMunicipios").html(t)):(t='<option value=""><\/option>',$.each(n.p_tabla,function(n,i){t+='<option value="'+i.clave+'">'+i.nombre+"<\/option>"}),$("#listaMunicipios").html(t));return}function obtenerMunicipios(n){$(this).data("locked")!=undefined&&$(this).data("locked")||$.ajax({type:"GET",url:"obtenerMunicipios",data:{estado:n},contentType:"application/json; utf-8",dataType:"json",beforeSend:function(){$(this).data("locked",!0)},success:function(n){$municipios=JSON.parse(n);llenarMunicipios($municipios)},error:function(){$("#listaMunicipios").html('<option value="">Error al cargar<\/option>')},complete:function(){$(this).data("locked",!1)}});return}function llenarMunicipios(){var n,t;$("#listaEstados").length>0&&(n=$("#listaEstados option:selected").html(),n==""?(t='<option value=""><\/option>',$("#ciuProc").html(t)):obtenerMunicipios(n));return}function mostrarPassword(n){prevenirDefault(n);$("#ocultar-password-article").slideToggle();$("#mostrar-password-article").slideToggle()}var $buttonMenu=$(".menu-link");$cerrarSesionA=$("#cerrarsesion-link");$elegirMateria=$(".elegir-materia");$quitarMateria=$(".quitar-materia");$botonIndicaciones=$("#boton-indicaciones");window.addEventListener("unload",function(){$.ajax({type:"GET",url:"/Reportes/Eliminar",async:!1,data:{},success:function(){},error:function(n,t,i){console.log(n+t+i.toString())},complete:function(){}})});$elegirMateria.on("click",agregarMateria);$(".quitar-materia").on("click",quitarMateria);$(".elegir-materiacc").on("click",agregarMateriaCC);$(".quitar-materiacc").on("click",quitarMateriaCC);$buttonMenu.on("click",desplegarMenu);$cerrarSesionA.on("click",cerrarSesion);$("#paginaprincipal-link").on("click",redirectHome);$botonIndicaciones.on("click",indicacionesContinuar);$("#boton-guardar-encuesta").on("click",llenarInstrumentos);$("#imprimir-comprobante").on("click",imprimirVentana);$("#login-form").on("submit",validateLog);$("#user-name").on("keyup",validUser);$("#pass-user").on("keyup",validPass);$("#motivos-solicitud").on("change",validMotivosSolicitud);$(".checkbox-materia").on("change",validMateriasSolicitud);$(".checkbox-materiaC").on("change",modificarCreditosInscritos);$("#guardar-baja-form").on("submit",guardarBajaTemporal);$("#guardar-extra-form").on("submit",guardarExamenExtraordinario);$().ready(llenarCreditosInscritos);$().ready(mostrarPropuestaSection);$("#mostrar-pass-form").on("submit",mostrarPassword);$("#ocultar-pass-form").on("submit",mostrarPassword);$("#listaEstados").on("change",llenarMunicipios)